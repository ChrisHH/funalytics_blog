<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Christian Jaehnert">
<meta name="dcterms.date" content="2023-11-27">

<title>FUNAlytics Blog - Flight LH790 (MUC - SIN)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../üìä" rel="icon">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"headline",
  "consent_type":"express",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  });
});
</script> 
  


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">FUNAlytics Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/christian-jaehnert/" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Flight LH790 (MUC - SIN)</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">ggplot</div>
                <div class="quarto-category">tidyverse</div>
                <div class="quarto-category">aviation</div>
                <div class="quarto-category">MUC</div>
                <div class="quarto-category">SIN</div>
                <div class="quarto-category">flights</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Christian Jaehnert </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">November 27, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#punctuality-of-departure" id="toc-punctuality-of-departure" class="nav-link" data-scroll-target="#punctuality-of-departure">Punctuality of departure</a></li>
  <li><a href="#speed-altitude" id="toc-speed-altitude" class="nav-link" data-scroll-target="#speed-altitude">Speed &amp; Altitude</a></li>
  <li><a href="#altitude-and-duration" id="toc-altitude-and-duration" class="nav-link" data-scroll-target="#altitude-and-duration">Altitude and Duration</a></li>
  <li><a href="#approaching-singapore" id="toc-approaching-singapore" class="nav-link" data-scroll-target="#approaching-singapore">Approaching Singapore</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Hello, it‚Äôs been a while since my last post! You remember the bears in Canada? üêª</p>
<p>However, both this post and the last one share a common theme: they‚Äôre about my upcoming travels.<br>
I‚Äôm eagerly anticipating my trip to Singapore. As a fan of the city, I want to start enjoying it right from the moment of my arrival, which means catching a glimpse of the skyline as the plane approaches Changi Airport.</p>
<p>Given the airport is located to the east of the city, a south-west approach typically offers the most scenic vistas. The question is: What is the likelihood that I will see this view, sitting on the left side of the plane?</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="singapore_skyline.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><em>Source: Swapnil Bapat on Unsplash.com</em></figcaption>
</figure>
</div>
<p><strong>Thankfully, data is here to help! I invite you to join me on this analytical journey.</strong> ‚úàÔ∏è</p>
</section>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<p>My flight to Singapore is with Lufthansa, departing from Munich. I‚Äôll be on flight LH790, a service offered six times per week using the very fuel-efficient A350.</p>
<p>Aviation is a passion of mine, so I have a membership at <a href="http://www.flightradar24.com/">www.flightradar24.com</a>. ü§ì This allows the download of the flight path for each flight over the past 365 days. I downloaded the data for the last 80 days‚Äô flights of LH790. Let‚Äôs first look at the variables and the date range.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset nav-pills">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Variables</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Flight Dates</a></li></ul>
<div class="tab-content nav-pills">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell" data-hash="index_cache/html/unnamed-chunk-1_82a68e77e97bdde733a2113797c822f1">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 115,502
Columns: 13
$ timestamp     &lt;dbl&gt; 1691784874, 1691784882, 1691784892, 1691784903, 16917849‚Ä¶
$ utc           &lt;dttm&gt; 2023-08-11 20:14:34, 2023-08-11 20:14:42, 2023-08-11 20‚Ä¶
$ callsign      &lt;chr&gt; "DLH790", "DLH790", "DLH790", "DLH790", "DLH790", "DLH79‚Ä¶
$ lat           &lt;dbl&gt; 48.35789, 48.35788, 48.35789, 48.35790, 48.35798, 48.358‚Ä¶
$ lon           &lt;dbl&gt; 11.79256, 11.79278, 11.79301, 11.79330, 11.79355, 11.793‚Ä¶
$ altitude      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,‚Ä¶
$ speed         &lt;dbl&gt; 3, 4, 4, 4, 4, 4, 0, 0, 4, 5, 6, 6, 12, 13, 14, 15, 15, ‚Ä¶
$ direction     &lt;dbl&gt; 261, 255, 244, 225, 208, 182, 174, 174, 174, 174, 174, 1‚Ä¶
$ file_name     &lt;chr&gt; "LH790_318ce2d1.csv", "LH790_318ce2d1.csv", "LH790_318ce‚Ä¶
$ weekday       &lt;ord&gt; Fri, Fri, Fri, Fri, Fri, Fri, Fri, Fri, Fri, Fri, Fri, F‚Ä¶
$ weekday_start &lt;ord&gt; Fri, Fri, Fri, Fri, Fri, Fri, Fri, Fri, Fri, Fri, Fri, F‚Ä¶
$ date_start    &lt;date&gt; 2023-08-11, 2023-08-11, 2023-08-11, 2023-08-11, 2023-08‚Ä¶
$ label         &lt;chr&gt; "LH790 2023-08-11", "LH790 2023-08-11", "LH790 2023-08-1‚Ä¶</code></pre>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell" data-hash="index_cache/html/unnamed-chunk-2_f859c0563a5afce0ceb99c3d66ad42f3">
<div class="cell-output cell-output-stdout">
<pre><code> [1] "2023-08-11" "2023-08-13" "2023-08-14" "2023-08-15" "2023-08-16"
 [6] "2023-08-17" "2023-08-18" "2023-08-20" "2023-08-21" "2023-08-22"
[11] "2023-08-23" "2023-08-24" "2023-08-25" "2023-08-27" "2023-08-28"
[16] "2023-08-29" "2023-08-30" "2023-08-31" "2023-09-01" "2023-09-03"
[21] "2023-09-04" "2023-09-06" "2023-09-07" "2023-09-08" "2023-09-10"
[26] "2023-09-11" "2023-09-13" "2023-09-14" "2023-09-15" "2023-09-17"
[31] "2023-09-18" "2023-09-20" "2023-09-21" "2023-09-22" "2023-09-24"
[36] "2023-09-25" "2023-09-27" "2023-09-28" "2023-09-29" "2023-10-01"
[41] "2023-10-02" "2023-10-04" "2023-10-05" "2023-10-06" "2023-10-08"
[46] "2023-10-09" "2023-10-11" "2023-10-12" "2023-10-13" "2023-10-15"
[51] "2023-10-16" "2023-10-18" "2023-10-19" "2023-10-22" "2023-10-23"
[56] "2023-10-25" "2023-10-26" "2023-10-27" "2023-10-29" "2023-10-30"
[61] "2023-10-31" "2023-11-01" "2023-11-02" "2023-11-03" "2023-11-05"
[66] "2023-11-06" "2023-11-07" "2023-11-08" "2023-11-09" "2023-11-10"
[71] "2023-11-12" "2023-11-13" "2023-11-14" "2023-11-15" "2023-11-16"
[76] "2023-11-17" "2023-11-19" "2023-11-20" "2023-11-21" "2023-11-22"</code></pre>
</div>
</div>
</div>
</div>
</div>
<p>The data is already quite impressive. From just 80 flights, I‚Äôve gathered 115,502 data points, averaging about 1,444 per flight. So, what do we have?</p>
<p>The timestamp and UTC provide the time information. Latitude (Lat) and Longitude (Lon) show the position of the plane at a certain timestamp/UTC. There‚Äôs also data on speed (in knots), altitude (in feet), and direction (heading) for that moment.</p>
<p>I‚Äôve already derived some additional variables that might be useful or interesting, such as the weekday, the weekday of departure from Munich (since the date line is crossed during the flight), and a unique label for each flight.</p>
<p>The following analysis is based on the LH790 flights from 2023-08-11 to 2023-11-22. That is a difference of 103 days. But since the connection is not offered every day, we only look into the last 80 flights in this date range.</p>
<p>Now its time to jump into the data!</p>
</section>
<section id="punctuality-of-departure" class="level2">
<h2 class="anchored" data-anchor-id="punctuality-of-departure">Punctuality of departure</h2>
<p>Let‚Äôs begin with a quick review of the departure punctuality. The flight is scheduled to depart at 10 PM from Munich. I calculated the difference between this time and the actual take-off time, which is determined by the first waypoint (time) exceeding 1000 feet.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-3_78950d119bf928a85973a7471e409b08">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="1260"></p>
</div>
</div>
<p>Fortunately, the histogram indicates that only a few flights have delays exceeding one hour. The average delay is approximately 36.4 minutes. This seems quite reasonable for a 12-hour flight, especially considering that the STD refers to the time when the plane is pushed back. Thus, the ‚Äúdelay‚Äù observed here actually encompasses the time taken for pushing back and taxiing. In conclusion, there is no need to be concerned about significant delays.</p>
</section>
<section id="speed-altitude" class="level2">
<h2 class="anchored" data-anchor-id="speed-altitude">Speed &amp; Altitude</h2>
<p>Let‚Äôs scatter both variables, speed and altitude, from the 80 flights.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-4_2e306cbfabf74749893c409ec1b75f53">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="1260"></p>
</div>
</div>
<p>The plot of speed versus altitude is intriguing. It clearly shows takeoff and landing phases (speed &gt; 0 at altitude = 0). It appears the plane takes off at around 150 knots, as that‚Äôs when altitude begins to increase (vice versa for landing).</p>
<p>There seems to be a linear relationship between speed and altitude, which is intuitive. But why does it form a funnel shape? This warrants further investigation. My theory is that there‚Äôs a different relationship (scatter) during the three flight stages:</p>
<ol type="1">
<li><p>Takeoff/Climb</p></li>
<li><p>Cruise</p></li>
<li><p>Landing/Descent</p></li>
</ol>
<p>I don‚Äôt have stage information in the dataset, so I derived it, after removing some of the strange points in the scatter plot (very low speed at high altitude). See the following code.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-5_e9fbc1e01baa74f25c66ade056a9aac7">
<details>
<summary>Click here to unhide/hide the code.</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>all_data <span class="ot">&lt;-</span> all_data <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(altitude <span class="sc">&gt;</span> <span class="dv">100</span> <span class="sc">&amp;</span> speed <span class="sc">&lt;</span> <span class="dv">100</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(altitude <span class="sc">&gt;</span> <span class="dv">30000</span> <span class="sc">&amp;</span> speed <span class="sc">&lt;</span> <span class="dv">400</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(file_name) <span class="sc">%&gt;%</span> </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(timestamp) <span class="sc">%&gt;%</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">altitude_before =</span> <span class="fu">lag</span>(altitude, <span class="at">default =</span> <span class="dv">0</span>),</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">altitude_after =</span> <span class="fu">lead</span>(altitude))  <span class="sc">%&gt;%</span> </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(altitude <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> altitude_before <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> altitude_after <span class="sc">==</span> <span class="dv">0</span>)) </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>all_data <span class="ot">&lt;-</span> all_data <span class="sc">%&gt;%</span> </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(label) <span class="sc">%&gt;%</span> </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(utc, <span class="at">.by_group =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">startzeit =</span> utc[<span class="dv">1</span>], </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">flugdauer =</span> <span class="fu">difftime</span>(utc, startzeit, <span class="at">units =</span> <span class="st">"mins"</span>),</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">flugdauer =</span> <span class="fu">as.numeric</span>(flugdauer))</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>takeoff_threshold <span class="ot">=</span> <span class="dv">10</span>    </span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>landing_threshold <span class="ot">=</span> <span class="sc">-</span><span class="dv">10</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>all_data <span class="ot">&lt;-</span> all_data <span class="sc">%&gt;%</span> </span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">gradient =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="fu">diff</span>(altitude) <span class="sc">/</span> <span class="fu">diff</span>(flugdauer)),</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">smooth_gradient =</span> <span class="fu">rollmean</span>(gradient, <span class="dv">5</span>, <span class="at">fill =</span> <span class="cn">NA</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">phase =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    smooth_gradient <span class="sc">&gt;</span> takeoff_threshold <span class="sc">~</span> <span class="st">'Climb'</span>,</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    smooth_gradient <span class="sc">&lt;</span> landing_threshold <span class="sc">~</span> <span class="st">'Descend'</span>,</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">'Cruise'</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Whats going on in the code? After cleaning up of the anomalies in the data, I focused on calculating the relative length of the flight since takeoff. To clarify, I‚Äôm considering ‚Äòtakeoff‚Äô as the last moment when the altitude is zero and eliminating all prior data points, effectively excluding the taxiing phase (same applies for the landing).</p>
<p>The next step is to calculate the gradient, which involves correlating the change in altitude with the change in the relative length of the flight. The sign of this gradient indicates whether the plane is ascending or descending between two points. After this, I smooth out the gradient for a clearer analysis.</p>
<p>Let‚Äôs now revisit the plot, this time analyzing it by the flight phase.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-6_d0e9efc3b41f7bb307646ce1868f5b6f">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="1260"></p>
</div>
</div>
<p>The results are fascinating! The climb phase (red) requires higher speed to gain altitude, as governed by physical laws, as it sits more towards the right side (higher speed).</p>
<p>What‚Äôs particularly striking is the precision with which the plane maintains altitude at different speeds during the cruise phase (green lines).</p>
</section>
<section id="altitude-and-duration" class="level2">
<h2 class="anchored" data-anchor-id="altitude-and-duration">Altitude and Duration</h2>
<p>I need to take a closer look at this aspect of maintaining stable altitude.</p>
<p>Therefore, I am plotting the plane‚Äôs altitude against flight time (measured in minutes).</p>
<p>I will present a summary encompassing all flights, and for enhanced clarity, I will also showcase randomly selected flights throughout this article (you can switch between the different views using the tabs).</p>
<div class="tabset-margin-container"></div><div class="panel-tabset nav-pills">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">All Flights</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Random Flights</a></li></ul>
<div class="tab-content nav-pills">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell" data-hash="index_cache/html/unnamed-chunk-7_d5b61df52bc3a03e85f5329a227686b3">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="1260"></p>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell" data-hash="index_cache/html/unnamed-chunk-8_f285a6f5ef832fb3438c15a4455b076d">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="1260"></p>
</div>
</div>
</div>
</div>
</div>
<p>It‚Äôs amazing to see how the plane maintains a consistent altitude over an extended period of time. Yes, I‚Äôm aware there are minor deviations in altitude, or even significant ones during turbulence. The plot here is somewhat smoothed out due to the resolution of the measurement and also the range of the X- and Y-axis, but I‚Äôm still impressed.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>What can also be observed is that sometimes the altitude profile has gaps. This is due to the absence of data points in some instances. The reason for this is that Flightradar24 cannot track signals in certain areas of the world (e.g.&nbsp;ocean areas).</p>
</div>
</div>
<p>Upon further analysis, I noticed an anomaly on the flight dated November 19th. A quick check on Flightradar24 revealed that on that day, the plane was diverted to Kuala Lumpur after two unsuccessful landing attempts due to bad weather at the airport. I‚Äôll exclude this flight from the rest of the analysis.</p>
</section>
<section id="approaching-singapore" class="level2">
<h2 class="anchored" data-anchor-id="approaching-singapore">Approaching Singapore</h2>
<p>Let‚Äôs now turn our attention to the initial question regarding the likelihood of having the best view of Singapore‚Äôs skyline, and take a closer look at the local conditions in more detail.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Folie1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Source: Google Maps</figcaption>
</figure>
</div>
<p>As indicated on the map and mentioned earlier, if the approach is from the southwest (shown by the purple arrow), then the left side of the plane provides a good view of the skyline. On the other hand, for a northeast approach (marked by the orange arrow), it‚Äôs recommended to sit on the right side to catch a glimpse of the city, even if it‚Äôs not the full, impressive skyline.</p>
<p>What needs to be done now is to determine the approach direction for each flight in order to calculate the likelihood of getting the best view. How do I do that?</p>
<p>From the flight path I examined the final descent phase, specifically when the plane was below 2,000 feet (~ 600 m) in altitude, because at that stage I would expect (and hope üòÉ) that the plane is already fully aligned with the runway! Let‚Äôs first see if this expectation holds true!</p>
<div class="tabset-margin-container"></div><div class="panel-tabset nav-pills">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">All Flights</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Random Flights</a></li></ul>
<div class="tab-content nav-pills">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell" data-hash="index_cache/html/unnamed-chunk-10_33651d4a0d33289fbfdff5d26022b243">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="1260"></p>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell" data-hash="index_cache/html/unnamed-chunk-11_b969a9b44ae043b45c323e4b2e9120a4">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="1260"></p>
</div>
</div>
</div>
</div>
</div>
<p>The yellow point marks the location of the renowned Marina Bay Sands, while the green dot signifies the official location of Singapore Airport. It is very evident that at an altitude of 2,000 feet, the aircraft is already perfectly aligned with the runway (blue points form a perfect line). Additionally, it is observable that there is a singular direction offering a prime view of the skyline: the approach from the southwest (like we already know).</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>There is multiple runways at Singapore, thats why the line is shifted from day to day.</p>
</div>
</div>
<p>Now, all I need to do is classify each approach to easily tally them up. And here‚Äôs the concept: if the average latitude of the approach is less than the latitude of Singapore airport, then the approach is likely from the northeast. Conversely, if it‚Äôs higher, the approach is probably from the southeast. This must be adjusted to the specific airport (could be different if there are crossing runways). Let‚Äôs calculate and see what the results show.</p>
<div class="cell" data-hash="index_cache/html/unnamed-chunk-12_e426031f2721b6e1bf8567e00ea4d3b3">
<details>
<summary>Click here to unhide/hide the code.</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>flights_direction <span class="ot">&lt;-</span> all_data <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(label) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(phase <span class="sc">==</span> <span class="st">"Descend"</span> <span class="sc">&amp;</span> altitude <span class="sc">&lt;</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(label) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">approach_direction =</span> <span class="fu">if_else</span>(<span class="fu">mean</span>(lat) <span class="sc">&gt;</span> <span class="fl">1.359167</span>, </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">'north-east'</span>, </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">'south-west'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Now, let‚Äôs proceed to verify if the ‚Äúclassification‚Äù is accurate by conducting a graphical inspection (this time without the Marina Bay Sands, but only the airport as a green point).</p>
<div class="tabset-margin-container"></div><div class="panel-tabset nav-pills">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">All Flights</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Random Flights</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false">Result</a></li></ul>
<div class="tab-content nav-pills">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell" data-hash="index_cache/html/unnamed-chunk-13_2158e4977218ac6284fb169adbd7ccdd">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="1260"></p>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell" data-hash="index_cache/html/unnamed-chunk-14_93f10bce9ab62aae8f3c5bd42c799d42">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="1260"></p>
</div>
</div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="cell" data-hash="index_cache/html/unnamed-chunk-15_3f452ccd732d1d23bf46e373c93dce11">
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="1260"></p>
</div>
</div>
</div>
</div>
</div>
<p>To clarify the legend: the approach always refers to the <em>incoming</em> direction. So, ‚Äúsouth-west‚Äù means that the approach is being made from the southwest direction (as you can see in the plot). As mentioned earlier, the approach from the southwest offers the best view of the skyline, but <strong>it turns out, disappointingly, that only ~ 25% of the 80 flights are approached from this direction.<br>
<br>
What a pitty</strong> üò•.</p>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>I thoroughly enjoyed this quick analysis again. I hope you found it enjoyable too! I learned: I don‚Äôt need to worry about delays. I‚Äôm definitely planning to sit on the left side of the plane, fingers crossed for that 25% chance. ü§û</p>
<p>In my next post I will remain on this flight and try to identify holding patterns during the descent towards Singapore‚Äôs Changi airport. Stay tuned!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2023, Christian Jaehnert</div>   
    <div class="nav-footer-center"><div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">This website is built with ‚ù§Ô∏è and <a href="https://quarto.org/">Quarto</a></div>
  </div>
</footer>



</body></html>